---
name: service-discovery-controller

templates:
  service-discovery-controller_ctl.erb:     bin/service-discovery-controller_ctl
  service-discovery-controller_as_vcap.erb: bin/service-discovery-controller_as_vcap
  config.json.erb:                          config/config.json
  server.crt.erb:                           config/certs/server.crt
  server.key.erb:                           config/certs/server.key
  client_ca.crt.erb:                        config/certs/client_ca.crt

packages:
  - service-discovery-controller
  - sd-ctl-utils

provides:
- name: service-discovery-controller
  type: service-discovery-controller
  properties:
  - address
  - port

consumes:
- name: nats
  type: nats
  optional: true

properties:
  address:
    description: "Address which service-discovery-controller will listen on."
    default: 0.0.0.0

  port:
    description: "Port which service-discovery-controller will listen on."
    default: 8054

  dnshttps.server.tls:
    description: "Server-side mutual TLS configuration for dns over http"

  dnshttps.client.ca:
    description: "client-side mutual TLS configuration for dns over http"

  nats.user:
    description: User name for NATS authentication
    example: nats
  nats.password:
    description: Password for NATS authentication
    example: natSpa55w0rd
  nats.port:
    description: TCP port of NATS servers
    example: 4222
  nats.machines:
    description: IPs of each NATS cluster member
    example: |
      - 192.168.50.123
      - 192.168.52.123